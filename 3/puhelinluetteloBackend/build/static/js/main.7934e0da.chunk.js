(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(14),u=t.n(l),c=t(4),o=t(2),i=function(e){var n=e.name,t=e.number,a=e.deletePerson;return r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement("button",{onClick:a},"Delete")))},m=function(e){var n=e.message,t=e.type;return null===n?null:(console.log(n),r.a.createElement("div",{className:t},n))},d=t(3),f=t.n(d),s="/api/people",b=function(){return f.a.get(s).then((function(e){return e.data}))},E=function(e){return f.a.post(s,e).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return f.a.delete("".concat(s,"/").concat(e))},v=function(e){return r.a.createElement(r.a.Fragment,null,"filter shown with",r.a.createElement("input",{value:e.filter,onChange:e.handler}))},O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.name,onChange:e.handleName}))),r.a.createElement("tr",null,r.a.createElement("td",null,"number: "),r.a.createElement("td",null,r.a.createElement("input",{value:e.number,onChange:e.handleNumber}))))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.add},"add"))))},j=function(e){var n=e.persons,t=e.filter,a=e.delPerson;return n.map((function(e){return e.name.toUpperCase().indexOf(t.toUpperCase())>-1?r.a.createElement(i,{key:e.name,name:e.name,number:e.number,deletePerson:function(){return a(e)}}):null}))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],l=n[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),d=i[0],f=i[1],s=Object(a.useState)(""),g=Object(o.a)(s,2),w=g[0],y=g[1],k=Object(a.useState)(""),C=Object(o.a)(k,2),N=C[0],S=C[1],P=Object(a.useState)(null),x=Object(o.a)(P,2),D=x[0],F=x[1],J=Object(a.useState)("error"),U=Object(o.a)(J,2),A=U[0],B=U[1],I=!0;Object(a.useEffect)((function(){b().then((function(e){l(e)}))}),[]);var T=function(e,n){B(e),F(n),setTimeout((function(){F(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(m,{message:D,type:A}),r.a.createElement(v,{filter:N,handler:function(e){S(e.target.value)}}),r.a.createElement("h3",null,"Add new"),r.a.createElement(O,{name:d,handleName:function(e){f(e.target.value)},number:w,handleNumber:function(e){y(e.target.value)},add:function(e){e.preventDefault();var n={name:d,number:w};if(t.some((function(e){return e.name===d}))){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===d})),r=Object(c.a)(Object(c.a)({},a),{},{number:w});p(t.find((function(e){return e.name===d})).id,r).then((function(e){l(t.map((function(e){return e.name!==d?e:r}))),T("info","'".concat(e.name,"' updated"))})).catch((function(e){T("error",e.response.data.error),l(t.filter((function(e){return e.id!==a.id})))}))}I=!1}I&&E(n).then((function(e){l(t.concat(e)),T("info","'".concat(e.name,"' added"))})).catch((function(e){console.log(e.response.data.error),T("error",e.response.data.error)})),f(""),y("")}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(j,{persons:t,filter:N,delPerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(h(e.id).catch((function(n){T("error","Error, ".concat(e.name," does not exist on the server"))})),l(t.filter((function(n){return n.id!==e.id}))),T("info","'".concat(e.name,"' deleted")))}}))))};t(37);u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7934e0da.chunk.js.map